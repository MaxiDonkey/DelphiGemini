unit Gemini.Core.ArrayBuilder;

interface

type
  TArrayBuilder<T> = record
  private
    FItems: TArray<T>;
    FCount: Integer;
    procedure Append(const Item: T); inline;
  public
    /// <summary>
    /// Crée un builder avec une capacité initiale optionnelle.
    /// </summary>
    class function Create(const Capacity: Integer = 2): TArrayBuilder<T>; static;

    /// <summary>
    /// Garantit une capacité minimale donnée (comme avant).
    /// </summary>
    function Reserve(const Capacity: Integer): TArrayBuilder<T>;

    /// <summary>
    /// Ajoute un élément au buffer.
    /// </summary>
    function Add(const Item: T): TArrayBuilder<T>;

    /// <summary>
    /// Conversion implicite vers TArray&lt;T&gt;, tronqué à FCount.
    /// </summary>
    class operator Implicit(const Value: TArrayBuilder<T>): TArray<T>;
  end;

implementation

end.
